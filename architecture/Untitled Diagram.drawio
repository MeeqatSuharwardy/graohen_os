<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36" version="29.2.7">
  <diagram name="Privacy Phone PoC - Reference Architecture" id="0">
    <mxGraphModel dx="1892" dy="996" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="title" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;fontColor=#1a1a1a;" value="Privacy-First Secure Phone Platform&#xa;Proof of Concept - Reference Architecture" vertex="1">
          <mxGeometry height="60" width="1520" x="40" y="20" as="geometry" />
        </mxCell>
        <mxCell id="subtitle" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#666666;" value="Prepared for: FreedomXTech (FXW) | Prepared by: VulcanTech | Date: December 2025" vertex="1">
          <mxGeometry height="30" width="1520" x="40" y="80" as="geometry" />
        </mxCell>
        <mxCell id="boundary" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#999999;strokeWidth=2;dashed=1;opacity=30;" value="" vertex="1">
          <mxGeometry height="1000" width="1520" x="40" y="120" as="geometry" />
        </mxCell>
        <mxCell id="zone_client" parent="1" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff3cd;strokeColor=#e0a800;strokeWidth=2;dashed=1;opacity=25;" value="" vertex="1">
          <mxGeometry height="520" width="300" x="60" y="150" as="geometry" />
        </mxCell>
        <mxCell id="zone_client_label" parent="1" style="text;html=1;strokeColor=none;fillColor=#fff3cd;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#856404;" value="CLIENT DEVICE ZONE" vertex="1">
          <mxGeometry height="30" width="300" x="60" y="150" as="geometry" />
        </mxCell>
        <mxCell id="client_hw" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#e0a800;strokeWidth=2;fontSize=11;align=left;verticalAlign=top;spacingLeft=10;spacingTop=8;fontStyle=1;" value="Hardware Layer&#xa;Google Pixel Device&#xa;&#xa;â€¢ Verified Boot (AVB 2.0)&#xa;â€¢ Locked Bootloader&#xa;â€¢ Hardware Keystore (TEE/StrongBox)&#xa;â€¢ TrustZone/Trusty OS&#xa;â€¢ Secure Element" vertex="1">
          <mxGeometry height="120" width="260" x="80" y="190" as="geometry" />
        </mxCell>
        <mxCell id="client_os" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#e0a800;strokeWidth=2;fontSize=11;align=left;verticalAlign=top;spacingLeft=10;spacingTop=8;fontStyle=1;" value="OS Layer - GrapheneOS&#xa;Android 14+ (AOSP-based)&#xa;&#xa;â€¢ SELinux (Enforcing Mode)&#xa;â€¢ Seccomp filters&#xa;â€¢ Network namespaces&#xa;â€¢ Full Disk Encryption (FDE)&#xa;â€¢ No Google Play Services" vertex="1">
          <mxGeometry height="120" width="260" x="80" y="330" as="geometry" />
        </mxCell>
        <mxCell id="client_crypto" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff9e6;strokeColor=#fdcb6e;strokeWidth=2;fontSize=11;align=left;verticalAlign=top;spacingLeft=10;spacingTop=8;fontStyle=1;" value="Cryptography Library&#xa;Android Keystore System&#xa;&#xa;â€¢ AES-256-GCM (file encryption)&#xa;â€¢ RSA-4096 (key exchange)&#xa;â€¢ ECDSA-P256 (signing)&#xa;â€¢ PBKDF2-SHA256 (key derivation)&#xa;â€¢ HMAC-SHA256 (integrity)&#xa;â€¢ Hardware-backed storage" vertex="1">
          <mxGeometry height="140" width="260" x="80" y="470" as="geometry" />
        </mxCell>
        <mxCell id="client_apps" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#0c5460;strokeWidth=2;fontSize=11;align=left;verticalAlign=top;spacingLeft=10;spacingTop=8;fontStyle=1;" value="Application Suite&#xa;&#xa;â€¢ PDF Viewer (MuPDF) - Offline only&#xa;â€¢ Office Viewer (LibreOffice) - Local rendering&#xa;â€¢ Encryption Client - AES-256-GCM&#xa;â€¢ Messaging Client - Signal Protocol (E2EE)&#xa;â€¢ Email Client - IMAP/SMTP (TLS 1.3)&#xa;â€¢ Tor Browser - Official APK (isolated)" vertex="1">
          <mxGeometry height="140" width="260" x="80" y="730" as="geometry" />
        </mxCell>
        <mxCell id="zone_dmz" parent="1" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#004085;strokeWidth=2;dashed=1;opacity=25;" value="" vertex="1">
          <mxGeometry height="540" width="380" x="400" y="150" as="geometry" />
        </mxCell>
        <mxCell id="zone_dmz_label" parent="1" style="text;html=1;strokeColor=none;fillColor=#cce5ff;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#004085;" value="EDGE / DMZ ZONE" vertex="1">
          <mxGeometry height="30" width="380" x="400" y="150" as="geometry" />
        </mxCell>
        <mxCell id="load_balancer" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#1976d2;strokeWidth=2;fontSize=11;align=left;verticalAlign=top;spacingLeft=10;spacingTop=8;fontStyle=1;" value="Load Balancer&#xa;Nginx / HAProxy&#xa;&#xa;â€¢ TLS 1.3 termination&#xa;â€¢ SSL certificate management&#xa;â€¢ Rate limiting (per IP)&#xa;â€¢ Health checks&#xa;â€¢ Port 443 (HTTPS) / 80 (HTTP)" vertex="1">
          <mxGeometry height="120" width="340" x="420" y="200" as="geometry" />
        </mxCell>
        <mxCell id="api_gateway" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#004085;strokeWidth=2;fontSize=11;align=left;verticalAlign=top;spacingLeft=10;spacingTop=8;fontStyle=1;" value="API Gateway&#xa;Kong / Traefik / Custom Go Service&#xa;&#xa;â€¢ Request routing &amp; load balancing&#xa;â€¢ Authentication (mTLS)&#xa;â€¢ Authorization (JWT/Device Cert)&#xa;â€¢ Rate limiting (per device)&#xa;â€¢ Request signing validation&#xa;â€¢ WebSocket support (wss://)" vertex="1">
          <mxGeometry height="140" width="340" x="420" y="340" as="geometry" />
        </mxCell>
        <mxCell id="auth_service" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#1976d2;strokeWidth=2;fontSize=11;align=left;verticalAlign=top;spacingLeft=10;spacingTop=8;fontStyle=1;" value="Authentication Service&#xa;Go / Python (FastAPI)&#xa;&#xa;Endpoints:&#xa;â€¢ POST /api/v1/auth/device&#xa;  - Device cert validation&#xa;  - Returns JWT (15min TTL)&#xa;â€¢ POST /api/v1/auth/refresh&#xa;&#xa;Storage: Device certs (PostgreSQL),&#xa;Device allowlist (Redis), Session cache" vertex="1">
          <mxGeometry height="170" width="350" x="420" y="500" as="geometry" />
        </mxCell>
        <mxCell id="provisioning_service" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#1976d2;strokeWidth=2;fontSize=11;align=left;verticalAlign=top;spacingLeft=10;spacingTop=8;fontStyle=1;" value="Provisioning Service&#xa;Go / Python (FastAPI)&#xa;&#xa;Endpoints:&#xa;â€¢ POST /api/v1/provision/register&#xa;â€¢ POST /api/v1/provision/cert&#xa;â€¢ GET /api/v1/provision/config&#xa;&#xa;Functions: Device registration,&#xa;Certificate generation, App config deployment" vertex="1">
          <mxGeometry height="160" width="340" x="420" y="700" as="geometry" />
        </mxCell>
        <mxCell id="zone_app" parent="1" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e2d9f3;strokeColor=#6f42c1;strokeWidth=2;dashed=1;opacity=25;" value="" vertex="1">
          <mxGeometry height="590" width="380" x="820" y="150" as="geometry" />
        </mxCell>
        <mxCell id="zone_app_label" parent="1" style="text;html=1;strokeColor=none;fillColor=#e2d9f3;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#6f42c1;" value="APPLICATION SERVICES ZONE" vertex="1">
          <mxGeometry height="30" width="380" x="820" y="150" as="geometry" />
        </mxCell>
        <mxCell id="file_service" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#6f42c1;strokeWidth=2;fontSize=11;align=left;verticalAlign=top;spacingLeft=10;spacingTop=8;fontStyle=1;" value="Encrypted File Service&#xa;Go / Node.js&#xa;&#xa;Endpoints:&#xa;â€¢ POST /api/v1/files/upload (ciphertext only)&#xa;â€¢ GET /api/v1/files/{id} (stream)&#xa;â€¢ DELETE /api/v1/files/{id}&#xa;â€¢ GET /api/v1/files (list metadata)&#xa;&#xa;Features: Max 100MB, Range requests,&#xa;S3/MinIO storage, PostgreSQL metadata" vertex="1">
          <mxGeometry height="160" width="340" x="840" y="200" as="geometry" />
        </mxCell>
        <mxCell id="messaging_service" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#155724;strokeWidth=2;fontSize=11;align=left;verticalAlign=top;spacingLeft=10;spacingTop=8;fontStyle=1;" value="Session Messaging Service&#xa;Go / Node.js&#xa;&#xa;Protocol: WebSocket (wss://)&#xa;Endpoint: WS /api/v1/messaging/ws&#xa;&#xa;Features:&#xa;â€¢ Signal Protocol (E2EE) - Double Ratchet&#xa;â€¢ Session-based IDs (no phone numbers)&#xa;â€¢ Heartbeat (30s), Auto-reconnect&#xa;â€¢ PostgreSQL storage (encrypted)" vertex="1">
          <mxGeometry height="160" width="340" x="840" y="370" as="geometry" />
        </mxCell>
        <mxCell id="email_service" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#155724;strokeWidth=2;fontSize=11;align=left;verticalAlign=top;spacingLeft=10;spacingTop=8;fontStyle=1;" value="Private Email Service&#xa;Go / Python&#xa;&#xa;IMAP Server: Port 993 (TLS) - Dovecot&#xa;SMTP Server: Port 587 (STARTTLS) - Postfix&#xa;&#xa;Features:&#xa;â€¢ Device-bound authentication&#xa;â€¢ Randomized mailbox identifiers&#xa;â€¢ Retention policies&#xa;â€¢ Maildir format, PostgreSQL metadata" vertex="1">
          <mxGeometry height="170" width="350" x="840" y="550" as="geometry" />
        </mxCell>
        <mxCell id="audit_service" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#0277bd;strokeWidth=2;fontSize=11;align=left;verticalAlign=top;spacingLeft=10;spacingTop=8;fontStyle=1;" value="Audit &amp; Logging Service&#xa;Go / Python (FastAPI)&#xa;&#xa;Endpoint: POST /api/v1/audit/event&#xa;&#xa;Features:&#xa;â€¢ Security event logging&#xa;â€¢ Access attempt records&#xa;â€¢ Log integrity (HMAC)&#xa;â€¢ InfluxDB storage (time-series)&#xa;â€¢ Compliance export" vertex="1">
          <mxGeometry height="170" width="350" x="840" y="750" as="geometry" />
        </mxCell>
        <mxCell id="zone_data" parent="1" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8d7da;strokeColor=#842029;strokeWidth=2;dashed=1;opacity=25;" value="" vertex="1">
          <mxGeometry height="520" width="300" x="1240" y="150" as="geometry" />
        </mxCell>
        <mxCell id="zone_data_label" parent="1" style="text;html=1;strokeColor=none;fillColor=#f8d7da;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#842029;" value="DATA LAYER" vertex="1">
          <mxGeometry height="30" width="300" x="1240" y="150" as="geometry" />
        </mxCell>
        <mxCell id="postgres" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#842029;strokeWidth=2;fontSize=11;align=left;verticalAlign=top;spacingLeft=10;spacingTop=8;fontStyle=1;" value="PostgreSQL 15+&#xa;Primary Database&#xa;&#xa;Databases:&#xa;â€¢ file_metadata (encrypted)&#xa;â€¢ messaging (encrypted)&#xa;â€¢ email_metadata (encrypted)&#xa;â€¢ device_registry&#xa;â€¢ audit_logs&#xa;&#xa;Encryption: TDE (AES-256 at rest),&#xa;SSL/TLS connections" vertex="1">
          <mxGeometry height="180" width="260" x="1260" y="200" as="geometry" />
        </mxCell>
        <mxCell id="object_storage" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#842029;strokeWidth=2;fontSize=11;align=left;verticalAlign=top;spacingLeft=10;spacingTop=8;fontStyle=1;" value="Object Storage&#xa;S3 / MinIO&#xa;&#xa;â€¢ Ciphertext blobs only&#xa;â€¢ Versioning enabled&#xa;â€¢ Lifecycle policies&#xa;â€¢ Server-side encryption (SSE)&#xa;â€¢ AES-256 encryption&#xa;â€¢ Pre-signed URLs" vertex="1">
          <mxGeometry height="140" width="260" x="1260" y="400" as="geometry" />
        </mxCell>
        <mxCell id="redis_cache" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#c62828;strokeWidth=2;fontSize=11;align=left;verticalAlign=top;spacingLeft=10;spacingTop=8;fontStyle=1;" value="Redis Cache 7.x&#xa;&#xa;â€¢ Device allowlist&#xa;â€¢ Session storage (15min TTL)&#xa;â€¢ Rate limit counters&#xa;â€¢ JWT blacklist&#xa;â€¢ TLS enabled, AUTH required" vertex="1">
          <mxGeometry height="120" width="260" x="1260" y="560" as="geometry" />
        </mxCell>
        <mxCell id="influxdb" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#0277bd;strokeWidth=2;fontSize=11;align=left;verticalAlign=top;spacingLeft=10;spacingTop=8;fontStyle=1;" value="InfluxDB 2.x&#xa;Time-Series Database&#xa;&#xa;â€¢ Audit event logs&#xa;â€¢ Metrics aggregation&#xa;â€¢ 90 days (hot storage)&#xa;â€¢ 1 year (cold storage)&#xa;â€¢ Flux query language" vertex="1">
          <mxGeometry height="140" width="260" x="1260" y="700" as="geometry" />
        </mxCell>
        <mxCell id="zone_ext" parent="1" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f1f1f1;strokeColor=#333333;strokeWidth=2;dashed=1;opacity=25;" value="" vertex="1">
          <mxGeometry height="340" width="310" x="60" y="690" as="geometry" />
        </mxCell>
        <mxCell id="zone_ext_label" parent="1" style="text;html=1;strokeColor=none;fillColor=#f1f1f1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#333333;" value="EXTERNAL NETWORK" vertex="1">
          <mxGeometry height="30" width="300" x="60" y="700" as="geometry" />
        </mxCell>
        <mxCell id="tor_network" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#333333;strokeWidth=2;fontSize=11;align=left;verticalAlign=top;spacingLeft=10;spacingTop=8;fontStyle=1;" value="Tor Network&#xa;&#xa;â€¢ Official Tor Browser APK&#xa;â€¢ SOCKS5: 127.0.0.1:9050&#xa;â€¢ Isolated process (app-level only)&#xa;â€¢ No system-wide routing&#xa;â€¢ 3-hop encrypted circuit&#xa;â€¢ Entry guards, DNS over Tor" vertex="1">
          <mxGeometry height="140" width="260" x="80" y="890" as="geometry" />
        </mxCell>
        <mxCell id="e1" edge="1" parent="1" source="client_hw" style="endArrow=block;html=1;strokeWidth=2;strokeColor=#333333;" target="client_os">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e2" edge="1" parent="1" source="client_os" style="endArrow=block;html=1;strokeWidth=2;strokeColor=#333333;" target="client_crypto">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e3" edge="1" parent="1" source="client_crypto" style="endArrow=block;html=1;strokeWidth=2;strokeColor=#333333;dashed=1;" target="client_apps">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e4" edge="1" label="HTTPS (TLS 1.3)" parent="1" source="client_apps" style="endArrow=block;html=1;strokeWidth=3;strokeColor=#1976d2;fontSize=11;fontStyle=1;" target="load_balancer">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="370" y="440" />
              <mxPoint x="390" y="280" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e5" edge="1" parent="1" source="load_balancer" style="endArrow=block;html=1;strokeWidth=2;strokeColor=#333333;" target="api_gateway">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e6" edge="1" label="authz" parent="1" source="api_gateway" style="endArrow=block;html=1;strokeWidth=2;strokeColor=#333333;dashed=1;" target="auth_service">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e7" edge="1" parent="1" source="api_gateway" style="endArrow=block;html=1;strokeWidth=1;strokeColor=#666666;dashed=1;" target="provisioning_service">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e8" edge="1" label="POST /files/upload" parent="1" source="api_gateway" style="endArrow=block;html=1;strokeWidth=2;strokeColor=#6f42c1;fontSize=10;fontColor=#6f42c1;" target="file_service">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e9" edge="1" label="WS /messaging/ws" parent="1" source="api_gateway" style="endArrow=block;html=1;strokeWidth=2;strokeColor=#155724;fontSize=10;fontColor=#155724;" target="messaging_service">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e10" edge="1" label="IMAP/SMTP" parent="1" source="api_gateway" style="endArrow=block;html=1;strokeWidth=2;strokeColor=#155724;fontSize=10;fontColor=#155724;" target="email_service">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e11" edge="1" parent="1" source="api_gateway" style="endArrow=block;html=1;strokeWidth=1;strokeColor=#666666;dashed=1;" target="audit_service">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e12" edge="1" label="ciphertext" parent="1" source="file_service" style="endArrow=block;html=1;strokeWidth=2;strokeColor=#842029;fontSize=10;" target="object_storage">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e13" edge="1" label="metadata" parent="1" source="file_service" style="endArrow=block;html=1;strokeWidth=2;strokeColor=#842029;fontSize=10;" target="postgres">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e14" edge="1" parent="1" source="messaging_service" style="endArrow=block;html=1;strokeWidth=2;strokeColor=#155724;" target="postgres">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e15" edge="1" parent="1" source="email_service" style="endArrow=block;html=1;strokeWidth=2;strokeColor=#155724;" target="postgres">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e16" edge="1" parent="1" source="auth_service" style="endArrow=block;html=1;strokeWidth=1;strokeColor=#c62828;dashed=1;" target="redis_cache">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e17" edge="1" parent="1" source="audit_service" style="endArrow=block;html=1;strokeWidth=2;strokeColor=#0277bd;" target="influxdb">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e18" edge="1" label="Tor only" parent="1" source="client_apps" style="endArrow=block;html=1;strokeWidth=2;strokeColor=#333333;dashed=1;fontSize=10;" target="tor_network">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="legend" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f9f9f9;strokeColor=#cccccc;fontSize=10;align=left;verticalAlign=top;spacingLeft=10;spacingTop=8;" value="Security Zones:&#xa;ðŸŸ¡ Client Device Zone - Hardware-backed security, local encryption&#xa;ðŸ”µ Edge/DMZ Zone - Controlled access, authentication/authorization&#xa;ðŸŸ£ Application Services Zone - Business logic, service APIs&#xa;ðŸ”´ Data Layer - Encrypted storage, databases&#xa;âšª External Network - Isolated, restricted access&#xa;&#xa;Encryption: Client-side (AES-256-GCM before upload) | Transport (TLS 1.3) | Storage (AES-256 at rest) | E2EE (Signal Protocol for messaging)" vertex="1">
          <mxGeometry height="180" width="740" x="500" y="940" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
